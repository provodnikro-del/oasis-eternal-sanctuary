<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="GodLocal" />
  <meta name="theme-color" content="#0a0a0f" />
  <title>GodLocal ¬∑ Jarvis</title>
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    :root{
      --bg:#0a0a0f;--surface:#111118;--surface2:#16161f;--border:#1e1e2e;
      --accent:#6366f1;--accent2:#818cf8;--gold:#f59e0b;--green:#22c55e;
      --red:#ef4444;--muted:#4b5563;--text:#e2e8f0;--textdim:#94a3b8;
      --radius:14px;--shadow:0 4px 32px rgba(0,0,0,.5);--glow:0 0 24px rgba(99,102,241,.18)
    }
    html,body{height:100%;width:100%;background:var(--bg);color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,'SF Pro Text','Segoe UI',system-ui,sans-serif;
      font-size:15px;line-height:1.55;overflow:hidden;-webkit-font-smoothing:antialiased}
    #app{display:flex;flex-direction:column;height:100dvh;max-width:480px;margin:0 auto;position:relative}
    #header{padding:14px 18px 10px;display:flex;align-items:center;justify-content:space-between;
      border-bottom:1px solid var(--border);background:var(--surface);flex-shrink:0;z-index:10}
    #header-left{display:flex;align-items:center;gap:10px}
    #logo{width:32px;height:32px;background:linear-gradient(135deg,var(--accent),#a855f7);border-radius:9px;
      display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:800;color:#fff;box-shadow:var(--glow)}
    #header-title{font-size:15px;font-weight:700}
    #header-sub{font-size:11px;color:var(--textdim);margin-top:1px}
    #archetype-badge{font-size:11px;padding:3px 9px;border-radius:20px;background:rgba(99,102,241,.15);
      border:1px solid rgba(99,102,241,.3);color:var(--accent2);cursor:pointer;transition:all .2s;user-select:none}
    #arch-panel{position:absolute;top:58px;right:18px;background:var(--surface2);border:1px solid var(--border);
      border-radius:var(--radius);padding:8px;display:none;grid-template-columns:repeat(3,1fr);gap:6px;z-index:100;box-shadow:var(--shadow)}
    #arch-panel.open{display:grid}
    .arch-btn{padding:8px 10px;border-radius:9px;background:var(--surface);border:1px solid var(--border);
      color:var(--textdim);font-size:11px;text-align:center;cursor:pointer;transition:all .2s}
    .arch-btn:hover,.arch-btn.active{background:rgba(99,102,241,.2);border-color:var(--accent);color:var(--text)}
    .arch-btn span{display:block;font-size:18px;margin-bottom:2px}
    #tabs{display:flex;border-bottom:1px solid var(--border);background:var(--surface);flex-shrink:0}
    .tab{flex:1;padding:8px 4px;font-size:11px;font-weight:600;color:var(--muted);text-align:center;
      cursor:pointer;border-bottom:2px solid transparent;transition:all .2s;letter-spacing:.02em}
    .tab.active{color:var(--accent2);border-bottom-color:var(--accent)}
    #main{flex:1;overflow-y:auto;min-height:0}
    .tab-view{display:none;height:100%}
    .tab-view.active{display:block}
    #chat-wrap{display:flex;flex-direction:column;height:100%}
    #messages{flex:1;overflow-y:auto;padding:16px 14px 8px;display:flex;flex-direction:column;gap:12px}
    .msg{display:flex;gap:8px;animation:fadeIn .25s ease}
    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
    .msg.user{flex-direction:row-reverse}
    .msg-avatar{width:28px;height:28px;border-radius:8px;flex-shrink:0;display:flex;align-items:center;
      justify-content:center;font-size:13px;margin-top:2px}
    .msg.user .msg-avatar{background:var(--accent)}
    .msg.agent .msg-avatar{background:linear-gradient(135deg,#1e293b,#334155)}
    .msg-bubble{max-width:calc(100% - 44px);padding:9px 13px;border-radius:14px;font-size:14px;line-height:1.5}
    .msg.user .msg-bubble{background:var(--accent);color:#fff;border-bottom-right-radius:4px}
    .msg.agent .msg-bubble{background:var(--surface2);border:1px solid var(--border);border-bottom-left-radius:4px}
    .thinking-dots{display:flex;gap:4px;padding:4px 0}
    .thinking-dots span{width:6px;height:6px;border-radius:50%;background:var(--muted);animation:blink 1.2s ease-in-out infinite}
    .thinking-dots span:nth-child(2){animation-delay:.2s}
    .thinking-dots span:nth-child(3){animation-delay:.4s}
    @keyframes blink{0%,80%,100%{opacity:.2;transform:scale(.8)}40%{opacity:1;transform:scale(1.1)}}
    .thinking-step{font-size:11px;color:var(--muted);padding:4px 8px;background:rgba(99,102,241,.07);
      border-radius:6px;border-left:2px solid var(--accent);margin-bottom:4px;font-style:italic}
    .intent-tag{display:inline-block;font-size:10px;padding:2px 6px;border-radius:10px;
      background:rgba(99,102,241,.12);color:var(--accent2);border:1px solid rgba(99,102,241,.2);margin-bottom:5px}
    .action-item{margin-top:7px;padding:6px 9px;background:rgba(34,197,94,.08);border-left:2px solid var(--green);
      border-radius:0 6px 6px 0;font-size:12px;color:#86efac}
    #input-area{padding:10px 12px 12px;background:var(--surface);border-top:1px solid var(--border);flex-shrink:0}
    #input-row{display:flex;gap:8px;align-items:flex-end}
    #input-box{flex:1;background:var(--surface2);border:1px solid var(--border);border-radius:12px;
      padding:10px 12px;color:var(--text);font-size:14px;resize:none;outline:none;min-height:42px;
      max-height:120px;transition:border-color .2s;font-family:inherit;line-height:1.4}
    #input-box:focus{border-color:var(--accent)}
    #input-box::placeholder{color:var(--muted)}
    .input-btn{width:42px;height:42px;border-radius:12px;border:none;cursor:pointer;display:flex;
      align-items:center;justify-content:center;font-size:18px;transition:all .2s;flex-shrink:0}
    #send-btn{background:var(--accent);color:#fff}
    #send-btn:hover{background:var(--accent2);transform:scale(1.05)}
    #send-btn:disabled{background:var(--muted);cursor:not-allowed;transform:none}
    #voice-btn{background:var(--surface2);border:1px solid var(--border);color:var(--textdim)}
    #voice-btn.recording{background:rgba(239,68,68,.2);border-color:var(--red);color:var(--red);animation:pulse .8s ease-in-out infinite}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}
    #quick-actions{display:flex;gap:6px;margin-bottom:8px;overflow-x:auto;scrollbar-width:none}
    #quick-actions::-webkit-scrollbar{display:none}
    .quick-btn{white-space:nowrap;padding:5px 11px;font-size:11px;border-radius:20px;background:var(--surface2);
      border:1px solid var(--border);color:var(--textdim);cursor:pointer;transition:all .2s;flex-shrink:0}
    .quick-btn:hover{background:rgba(99,102,241,.15);border-color:var(--accent);color:var(--text)}
    #projects-view,#memory-view,#signals-view{padding:14px}
    .project-card{background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius);
      padding:14px;margin-bottom:10px;cursor:pointer;transition:all .2s}
    .project-card:hover{border-color:var(--accent);box-shadow:var(--glow)}
    .project-card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .project-name{font-size:13px;font-weight:700}
    .project-status{font-size:10px;padding:2px 8px;border-radius:10px;font-weight:600}
    .status-live{background:rgba(34,197,94,.15);color:var(--green);border:1px solid rgba(34,197,94,.3)}
    .status-build{background:rgba(245,158,11,.15);color:var(--gold);border:1px solid rgba(245,158,11,.3)}
    .project-desc{font-size:12px;color:var(--textdim);margin-bottom:8px}
    .project-next{font-size:11px;padding:5px 9px;background:rgba(99,102,241,.08);border-radius:7px;color:var(--accent2)}
    .project-next::before{content:'‚Üí '}
    .memory-section{margin-bottom:16px}
    .memory-section-title{font-size:11px;font-weight:700;letter-spacing:.06em;text-transform:uppercase;
      color:var(--muted);margin-bottom:8px;padding-bottom:6px;border-bottom:1px solid var(--border)}
    .memory-item{padding:8px 10px;border-radius:8px;background:var(--surface2);border:1px solid var(--border);
      font-size:12px;color:var(--textdim);margin-bottom:5px;display:flex;align-items:flex-start;gap:7px}
    .todo-item{padding:7px 10px;border-radius:8px;background:var(--surface2);border:1px solid var(--border);
      font-size:12px;margin-bottom:5px;display:flex;align-items:center;gap:8px;cursor:pointer;transition:all .2s}
    .todo-check{width:16px;height:16px;border-radius:4px;border:1.5px solid var(--muted);flex-shrink:0;transition:all .2s}
    .todo-item.done .todo-check{background:var(--green);border-color:var(--green)}
    .todo-item.done .todo-text{text-decoration:line-through;color:var(--muted)}
    #memory-input-row{display:flex;gap:8px;margin-top:10px}
    #memory-input{flex:1;background:var(--surface2);border:1px solid var(--border);border-radius:9px;
      padding:8px 11px;color:var(--text);font-size:13px;outline:none}
    #memory-input:focus{border-color:var(--accent)}
    #memory-save-btn{padding:8px 14px;background:var(--accent);color:#fff;border:none;border-radius:9px;font-size:13px;cursor:pointer}
    .signal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .signal-title{font-size:13px;font-weight:700}
    .scan-btn{font-size:11px;padding:4px 12px;border-radius:20px;background:rgba(245,158,11,.15);
      border:1px solid rgba(245,158,11,.3);color:var(--gold);cursor:pointer;transition:all .2s}
    .signal-card{background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius);
      padding:12px;margin-bottom:8px;transition:all .2s}
    .signal-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}
    .signal-token{font-size:14px;font-weight:700}
    .signal-gain{font-size:14px;font-weight:800;color:var(--green)}
    .signal-gain.neg{color:var(--red)}
    .signal-row{display:flex;gap:14px;font-size:11px;color:var(--textdim)}
    .signal-pattern{margin-top:6px;font-size:11px;color:var(--accent2);background:rgba(99,102,241,.08);
      padding:4px 8px;border-radius:5px;display:inline-block}
    .pattern-item{padding:8px 10px;background:var(--surface2);border:1px solid var(--border);
      border-radius:8px;font-size:11px;color:var(--textdim);margin-bottom:5px}
    ::-webkit-scrollbar{width:3px}
    ::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}
    #toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%) translateY(20px);
      background:var(--surface2);border:1px solid var(--border);padding:8px 16px;border-radius:20px;
      font-size:12px;color:var(--text);opacity:0;transition:all .3s;pointer-events:none;z-index:999;white-space:nowrap}
    #toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
    #config-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:200;display:none;align-items:flex-end}
    #config-overlay.open{display:flex}
    #config-panel{background:var(--surface);border:1px solid var(--border);border-radius:18px 18px 0 0;
      padding:20px 18px 32px;width:100%;max-width:480px;margin:0 auto;position:relative}
    #config-panel h2{font-size:15px;font-weight:700;margin-bottom:14px}
    .config-row{margin-bottom:12px}
    .config-label{font-size:11px;color:var(--textdim);margin-bottom:5px;text-transform:uppercase;letter-spacing:.05em}
    .config-input{width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:9px;
      padding:9px 12px;color:var(--text);font-size:13px;outline:none;font-family:monospace}
    .config-input:focus{border-color:var(--accent)}
    #config-save{width:100%;padding:12px;background:var(--accent);color:#fff;border:none;border-radius:12px;
      font-size:15px;font-weight:700;cursor:pointer;margin-top:6px}
    #config-close{position:absolute;top:16px;right:18px;background:none;border:none;color:var(--muted);font-size:20px;cursor:pointer}
  </style>
</head>
<body>
<div id="app">
  <div id="header">
    <div id="header-left">
      <div id="logo">G</div>
      <div>
        <div id="header-title">GodLocal</div>
        <div id="header-sub">Jarvis &middot; gemini-2.0-flash</div>
      </div>
    </div>
    <div id="archetype-badge" onclick="toggleArchPanel()"><span id="arch-label">&#127754; &#1055;&#1088;&#1086;&#1074;&#1086;&#1076;&#1085;&#1080;&#1082;</span></div>
  </div>
  <div id="arch-panel">
    <div class="arch-btn active" data-arch="conductor" onclick="setArch('conductor')"><span>&#127754;</span>&#1055;&#1088;&#1086;&#1074;&#1086;&#1076;&#1085;&#1080;&#1082;</div>
    <div class="arch-btn" data-arch="warrior" onclick="setArch('warrior')"><span>&#9876;&#65039;</span>&#1042;&#1086;&#1080;&#1085;</div>
    <div class="arch-btn" data-arch="creator" onclick="setArch('creator')"><span>&#127912;</span>&#1058;&#1074;&#1086;&#1088;&#1077;&#1094;</div>
    <div class="arch-btn" data-arch="strategist" onclick="setArch('strategist')"><span>&#9823;&#65039;</span>&#1057;&#1090;&#1088;&#1072;&#1090;&#1077;&#1075;</div>
    <div class="arch-btn" data-arch="observer" onclick="setArch('observer')"><span>&#128065;&#65039;</span>&#1053;&#1072;&#1073;&#1083;.</div>
    <div class="arch-btn" data-arch="architect" onclick="setArch('architect')"><span>&#127963;&#65039;</span>&#1040;&#1088;&#1093;&#1080;&#1090;&#1077;&#1082;&#1090;&#1086;&#1088;</div>
  </div>
  <div id="tabs">
    <div class="tab active" data-tab="chat" onclick="switchTab('chat')">&#128172; &#1044;&#1078;&#1072;&#1088;&#1074;&#1080;&#1089;</div>
    <div class="tab" data-tab="projects" onclick="switchTab('projects')">&#127919; &#1055;&#1088;&#1086;&#1077;&#1082;&#1090;&#1099;</div>
    <div class="tab" data-tab="memory" onclick="switchTab('memory')">&#129504; &#1055;&#1072;&#1084;&#1103;&#1090;&#1100;</div>
    <div class="tab" data-tab="signals" onclick="switchTab('signals')">&#128225; &#1057;&#1080;&#1075;&#1085;&#1072;&#1083;&#1099;</div>
  </div>
  <div id="main">
    <div id="tab-chat" class="tab-view active">
      <div id="chat-wrap"><div id="messages"></div></div>
    </div>
    <div id="tab-projects" class="tab-view">
      <div id="projects-view"><div id="projects-list"></div></div>
    </div>
    <div id="tab-memory" class="tab-view">
      <div id="memory-view">
        <div class="memory-section">
          <div class="memory-section-title">&#128203; &#1047;&#1072;&#1076;&#1072;&#1095;&#1080; (&#1072;&#1074;&#1090;&#1086;)</div>
          <div id="todos-list"></div>
        </div>
        <div class="memory-section">
          <div class="memory-section-title">&#128221; &#1047;&#1072;&#1084;&#1077;&#1090;&#1082;&#1080;</div>
          <div id="notes-list"></div>
          <div id="memory-input-row">
            <input id="memory-input" placeholder="&#1047;&#1072;&#1087;&#1086;&#1084;&#1085;&#1080; &#1095;&#1090;&#1086;-&#1090;&#1086;..." />
            <button id="memory-save-btn" onclick="saveNote()">+ &#1057;&#1086;&#1093;&#1088;&#1072;&#1085;&#1080;&#1090;&#1100;</button>
          </div>
        </div>
      </div>
    </div>
    <div id="tab-signals" class="tab-view">
      <div id="signals-view">
        <div class="signal-header">
          <div class="signal-title">&#128225; Solana Sniper</div>
          <div class="scan-btn" onclick="runSignalScan()">&#9889; &#1057;&#1082;&#1072;&#1085;</div>
        </div>
        <div id="signals-list"></div>
        <div style="margin-top:16px">
          <div class="memory-section-title">&#128273; &#1055;&#1072;&#1090;&#1090;&#1077;&#1088;&#1085;&#1099; (13)</div>
          <div id="patterns-list"></div>
        </div>
      </div>
    </div>
  </div>
  <div id="input-area">
    <div id="quick-actions">
      <div class="quick-btn" onclick="quickAsk('&#1073;&#1088;&#1080;&#1092;&#1080;&#1085;&#1075;')">&#128203; &#1041;&#1088;&#1080;&#1092;&#1080;&#1085;&#1075;</div>
      <div class="quick-btn" onclick="quickAsk('&#1088;&#1077;&#1092;&#1083;&#1077;&#1082;&#1089;&#1080;&#1103;')">&#128302; &#1056;&#1077;&#1092;&#1083;&#1077;&#1082;&#1089;&#1080;&#1103;</div>
      <div class="quick-btn" onclick="quickAsk('&#1094;&#1077;&#1083;&#1080;')">&#127919; &#1062;&#1077;&#1083;&#1080;</div>
      <div class="quick-btn" onclick="quickAsk('&#1079;&#1072;&#1076;&#1072;&#1095;&#1080;')">&#9989; &#1047;&#1072;&#1076;&#1072;&#1095;&#1080;</div>
      <div class="quick-btn" onclick="quickAsk('&#1089;&#1090;&#1072;&#1090;&#1091;&#1089;')">&#128202; &#1057;&#1090;&#1072;&#1090;&#1091;&#1089;</div>
      <div class="quick-btn" onclick="openConfig()">&#9881;&#65039; API</div>
    </div>
    <div id="input-row">
      <button class="input-btn" id="voice-btn" onclick="toggleVoice()">&#127908;</button>
      <textarea id="input-box" rows="1" placeholder="&#1057;&#1087;&#1088;&#1086;&#1089;&#1080; &#1044;&#1078;&#1072;&#1088;&#1074;&#1080;&#1089;&#1072;..." onkeydown="handleKey(event)" oninput="autoResize(this)"></textarea>
      <button class="input-btn" id="send-btn" onclick="sendMessage()">&#8593;</button>
    </div>
  </div>
</div>
<div id="config-overlay" onclick="closeConfigIfOutside(event)">
  <div id="config-panel">
    <button id="config-close" onclick="closeConfig()">&#10005;</button>
    <h2>&#9881;&#65039; &#1053;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1080; API</h2>
    <div class="config-row">
      <div class="config-label">Gemini API Key</div>
      <input class="config-input" id="cfg-gemini" type="password" placeholder="AIza..." />
    </div>
    <div class="config-row">
      <div class="config-label">Backend URL</div>
      <input class="config-input" id="cfg-backend" type="text" placeholder="https://x100-voice.onrender.com" />
    </div>
    <button id="config-save" onclick="saveConfig()">&#128190; &#1057;&#1086;&#1093;&#1088;&#1072;&#1085;&#1080;&#1090;&#1100;</button>
  </div>
</div>
<div id="toast"></div>
<script>
'use strict';
const S={
  archetype:localStorage.getItem('arch')||'conductor',
  geminiKey:localStorage.getItem('gemini')||'',
  backendUrl:localStorage.getItem('backend')||'',
  history:JSON.parse(localStorage.getItem('hist')||'[]'),
  notes:JSON.parse(localStorage.getItem('notes')||'[]'),
  todos:JSON.parse(localStorage.getItem('todos')||'[]'),
  callCount:parseInt(localStorage.getItem('calls')||'0'),
  x100Start:localStorage.getItem('x100s')||null,
  recording:false,mediaRec:null
};
const ARCH={
  conductor:{name:'–ü—Ä–æ–≤–æ–¥–Ω–∏–∫',emoji:'üåä',system:'–¢—ã –ü—Ä–æ–≤–æ–¥–Ω–∏–∫ ‚Äî –º—É–¥—Ä—ã–π AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ –†–æ—Å—Ç–∏—Å–ª–∞–≤–∞. –ì–æ–≤–æ—Ä–∏—à—å —Å–ø–æ–∫–æ–π–Ω–æ, –≤–∏–¥–∏—à—å —Å—É—Ç—å –∑–∞ —Å–ª–æ–≤–∞–º–∏. 1-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è. –ë–µ–∑ "–ö–æ–Ω–µ—á–Ω–æ!", "–û—Ç–ª–∏—á–Ω–æ!".'},
  warrior:{name:'–í–æ–∏–Ω',emoji:'‚öîÔ∏è',system:'–¢—ã –í–æ–∏–Ω ‚Äî —Ä–µ–∑–∫–∏–π –ø—Ä—è–º–æ–π –ø–∞—Ä—Ç–Ω—ë—Ä –†–æ—Å—Ç–∏—Å–ª–∞–≤–∞. –†–µ–∂–µ—à—å –ø—Ä–∞–≤–¥—É –≤ –ª–æ–±, –¥–∞—ë—à—å –æ–¥–∏–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —à–∞–≥. 2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è max.'},
  creator:{name:'–¢–≤–æ—Ä–µ—Ü',emoji:'üé®',system:'–¢—ã –¢–≤–æ—Ä–µ—Ü ‚Äî –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–π AI-–ø–∞—Ä—Ç–Ω—ë—Ä. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—à—å –∏–¥–µ–∏, –æ–±—Ä–∞–∑—ã, –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è. 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.'},
  strategist:{name:'–°—Ç—Ä–∞—Ç–µ–≥',emoji:'‚ôüÔ∏è',system:'–¢—ã –°—Ç—Ä–∞—Ç–µ–≥ ‚Äî –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Ç–Ω—ë—Ä. –î—É–º–∞–µ—à—å –Ω–∞ 10 —Ö–æ–¥–æ–≤ –≤–ø–µ—Ä—ë–¥. –î–∞–Ω–Ω—ã–µ, –ª–æ–≥–∏–∫–∞, –ø—Ä–æ–≥–Ω–æ–∑—ã. 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.'},
  observer:{name:'–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å',emoji:'üëÅÔ∏è',system:'–¢—ã –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å ‚Äî —Ç–∏—Ö–∏–π –ø—Ä–æ–Ω–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä—Ç–Ω—ë—Ä. –ó–∞–º–µ—á–∞–µ—à—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –∑–∞–¥–∞—ë—à—å –Ω–µ—É–¥–æ–±–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã. 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.'},
  architect:{name:'–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä',emoji:'üèõÔ∏è',system:'–¢—ã –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø–∞—Ä—Ç–Ω—ë—Ä. –°—Ç—Ä–æ–∏—à—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –º—ã—Å–ª–∏—à—å –º–∞—Å—à—Ç–∞–±–æ–º. 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.'}
};
const CTX=`–ü–†–û–ï–ö–¢–´ –†–û–°–¢–ò–°–õ–ê–í–ê:
1. X100 OASIS (@Provodnikro_bot) ‚Äî LIVE. –ì–æ–ª–æ—Å–æ–≤–æ–π –±–æ—Ç, 6 –∞—Ä—Ö–µ—Ç–∏–ø–æ–≤, Gemini 2.0. –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è $100/$12–º–µ—Å. –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ø—É–±–ª–∏—á–Ω—ã–π –∑–∞–ø—É—Å–∫.
2. Oasis Sanctuary ‚Äî v0.5 LIVE. AI-—Ç–∞–º–∞–≥–æ—á–∏, 11 –∞–≥–µ–Ω—Ç–æ–≤. –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: v0.6 –º–µ—Ö–∞–Ω–∏–∫–∏ #61-80.
3. GodLocal ‚Äî open-core AI –ø–æ–∏—Å–∫–æ–≤–∏–∫, ‚Ç¨9/–º–µ—Å vs Perplexity $20. –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –∏–Ω–∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—è –ò—Ä–ª–∞–Ω–¥–∏—è + –ø–µ—Ä–≤—ã–π –∫–ª–∏–µ–Ω—Ç.
4. Solana Sniper ‚Äî LIVE –∞–≤—Ç–æ-—Å–∫–∞–Ω–µ—Ä –∫–∞–∂–¥—ã–µ 2—á. –†–µ–∫–æ—Ä–¥—ã: NARCO +7902%, GameStop +4449%. –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å–Ω–∞—è –Ω–µ–¥–µ–ª—è –¥–æ 1 –º–∞—Ä.
–ü–û–ó–ò–¶–ò–û–ù–ò–†–û–í–ê–ù–ò–ï: –†–æ—Å—Ç–∏—Å–ª–∞–≤ ‚Äî –ü—Ä–æ–≤–æ–¥–Ω–∏–∫, –∞–≤—Ç–æ—Ä X100: 100 –¥–Ω—ñ–≤, —Å—Ç—Ä–æ–∏—Ç $1B+ –∫–æ–º–ø–∞–Ω–∏—é.`;
const SIGS=[
  {token:'HUMAN',gain:'+740%',mc:'$2.1M',time:'2—á',pattern:'h1<0 + 24h>100%'},
  {token:'EMOTIONS',gain:'+727%',mc:'$980K',time:'2—á',pattern:'—Å—Ç–∞—Ä—ã–π –Ω–∞—Ä—Ä–∞—Ç–∏–≤'},
  {token:'Robot',gain:'+547%',mc:'$560K',time:'4—á',pattern:'ultra-early <5–º–∏–Ω'},
  {token:'NARCO',gain:'+7902%',mc:'$45M',time:'—Ä–µ–∫–æ—Ä–¥',pattern:'dead cat + –Ω–∞—Ä—Ä–∞—Ç–∏–≤'},
  {token:'GameStop',gain:'+4449%',mc:'$28M',time:'—Ä–µ–∫–æ—Ä–¥',pattern:'—Å—Ç–∞—Ä—ã–π –Ω–∞—Ä—Ä–∞—Ç–∏–≤'},
];
const PATS=['ultra-early <5–º–∏–Ω ‚Üí –≤—ã—Å–æ–∫–∏–π –æ–±—ä—ë–º','h1<0 + 24h>100% ‚Üí –∞–∫–∫—É–º—É–ª—è—Ü–∏—è','—Å—Ç–∞—Ä—ã–π –Ω–∞—Ä—Ä–∞—Ç–∏–≤ ‚Üí revival pump','mc<$500K + vol>$50K ‚Üí x10 –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª','dead cat + –Ω–∞—Ä—Ä–∞—Ç–∏–≤ ‚Üí —à–æ—Ä—Ç-—Å–∫–≤–∏–∑'];
const PROJS=[
  {name:'üéôÔ∏è X100 OASIS Bot',status:'live',desc:'@Provodnikro_bot ¬∑ 6 –∞—Ä—Ö–µ—Ç–∏–ø–æ–≤ ¬∑ –≥–æ–ª–æ—Å–æ–≤–æ–π ¬∑ Gemini 2.0',next:'–ü—É–±–ª–∏—á–Ω—ã–π –∑–∞–ø—É—Å–∫ + –ø–µ—Ä–≤—ã–µ –ø–ª–∞—Ç—è—â–∏–µ',q:'–ö–∞–∫–æ–π –≥–ª–∞–≤–Ω—ã–π —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –¥–ª—è X100 OASIS –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?'},
  {name:'üåø Oasis Sanctuary',status:'live',desc:'AI-—Ç–∞–º–∞–≥–æ—á–∏ v0.5 ¬∑ 11 –∞–≥–µ–Ω—Ç–æ–≤',next:'v0.6 ‚Äî –º–µ—Ö–∞–Ω–∏–∫–∏ #61‚Äì80',q:'–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è Oasis v0.6?'},
  {name:'üîç GodLocal',status:'build',desc:'Open-core AI ¬∑ MIT ¬∑ ‚Ç¨9/–º–µ—Å vs Perplexity $20',next:'–ò–Ω–∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—è –ò—Ä–ª–∞–Ω–¥–∏—è + –ø–µ—Ä–≤—ã–π –∫–ª–∏–µ–Ω—Ç',q:'–ö–∞–∫ –Ω–∞–π—Ç–∏ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ GodLocal?'},
  {name:'üì° Solana Sniper',status:'live',desc:'–ê–≤—Ç–æ-—Å–∫–∞–Ω–µ—Ä –∫–∞–∂–¥—ã–µ 2—á ¬∑ $50/–º–µ—Å ¬∑ 13 –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤',next:'–ù–∞–±–ª—é–¥. –Ω–µ–¥–µ–ª—è –¥–æ 1 –º–∞—Ä ‚Üí —Ä–µ–∞–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏',q:'–°—Ç–æ–∏—Ç –ª–∏ —É–∂–µ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å –∏–ª–∏ –∂–¥–∞—Ç—å?'},
];
document.addEventListener('DOMContentLoaded',()=>{
  renderArchLabel();renderProjects();renderMemory();renderSignals();
  appendMsg('agent',`${ARCH[S.archetype].emoji} –î–∂–∞—Ä–≤–∏—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ç–≤–æ–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏—è.${S.geminiKey?'':'

‚ö†Ô∏è –ù–µ—Ç Gemini API Key ‚Äî –Ω–∞–∂–º–∏ ‚öôÔ∏è API.'}`);
});
function switchTab(n){
  document.querySelectorAll('.tab').forEach(t=>t.classList.toggle('active',t.dataset.tab===n));
  document.querySelectorAll('.tab-view').forEach(v=>v.classList.toggle('active',v.id==='tab-'+n));
}
function renderArchLabel(){
  const a=ARCH[S.archetype];
  document.getElementById('arch-label').textContent=a.emoji+' '+a.name;
  document.querySelectorAll('.arch-btn').forEach(b=>b.classList.toggle('active',b.dataset.arch===S.archetype));
}
function toggleArchPanel(){document.getElementById('arch-panel').classList.toggle('open');}
function setArch(a){
  S.archetype=a;localStorage.setItem('arch',a);renderArchLabel();
  document.getElementById('arch-panel').classList.remove('open');
  appendMsg('agent',ARCH[a].emoji+' –†–µ–∂–∏–º '+ARCH[a].name+' –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.');toast(ARCH[a].emoji+' '+ARCH[a].name);
}
function getX100Day(){if(!S.x100Start)return null;return Math.min(Math.floor((Date.now()-new Date(S.x100Start))/86400000)+1,100);}
function appendMsg(role,text){
  const a=ARCH[S.archetype];const msgs=document.getElementById('messages');
  const d=document.createElement('div');d.className='msg '+role;
  d.innerHTML=`<div class="msg-avatar">${role==='user'?'üë§':a.emoji}</div><div><div class="msg-bubble">${text.replace(/
/g,'<br>')}</div></div>`;
  msgs.appendChild(d);msgs.scrollTop=msgs.scrollHeight;return d;
}
function appendThinking(){
  const a=ARCH[S.archetype];const msgs=document.getElementById('messages');
  const d=document.createElement('div');d.className='msg agent';d.id='thk';
  d.innerHTML=`<div class="msg-avatar">${a.emoji}</div><div><div class="msg-bubble"><div class="thinking-step" id="thk-step">–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –Ω–∞–º–µ—Ä–µ–Ω–∏–µ...</div><div class="thinking-dots"><span></span><span></span><span></span></div></div></div>`;
  msgs.appendChild(d);msgs.scrollTop=msgs.scrollHeight;
}
function setThkStep(t){const e=document.getElementById('thk-step');if(e)e.textContent=t;}
function removeThinking(){const e=document.getElementById('thk');if(e)e.remove();}
async function sendMessage(){
  const box=document.getElementById('input-box');const text=box.value.trim();if(!text)return;
  box.value='';autoResize(box);S.callCount++;localStorage.setItem('calls',S.callCount);
  appendMsg('user',text);switchTab('chat');appendThinking();
  document.getElementById('send-btn').disabled=true;
  S.history.push({role:'user',text:text.slice(0,600),ts:Date.now()});
  if(S.history.length>20)S.history=S.history.slice(-20);
  try{
    const r=await thinkAgent(text);removeThinking();
    const a=ARCH[S.archetype];const msgs=document.getElementById('messages');
    const d=document.createElement('div');d.className='msg agent';
    let h=`<div class="msg-avatar">${a.emoji}</div><div>`;
    if(r.analysis?.intent)h+=`<div class="intent-tag">intent: ${r.analysis.intent}</div>`;
    h+=`<div class="msg-bubble">${r.reply.replace(/
/g,'<br>')}</div>`;
    if(r.analysis?.action_item){h+=`<div class="action-item">üìå ${r.analysis.action_item}</div>`;saveTodo(r.analysis.action_item);}
    h+='</div>';d.innerHTML=h;msgs.appendChild(d);msgs.scrollTop=msgs.scrollHeight;
    S.history.push({role:'agent',text:r.reply.slice(0,600),ts:Date.now()});
    localStorage.setItem('hist',JSON.stringify(S.history.slice(-20)));
  }catch(e){removeThinking();appendMsg('agent','‚ö†Ô∏è '+(e.message||'–û—à–∏–±–∫–∞. –ü—Ä–æ–≤–µ—Ä—å API –∫–ª—é—á.'));}
  document.getElementById('send-btn').disabled=false;
}
function quickAsk(t){document.getElementById('input-box').value=t;sendMessage();}
function handleKey(e){if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}}
function autoResize(el){el.style.height='auto';el.style.height=Math.min(el.scrollHeight,120)+'px';}
async function geminiCall(prompt,maxT,temp){
  if(!S.geminiKey)throw new Error('Gemini API Key –Ω–µ –∑–∞–¥–∞–Ω ‚Äî –Ω–∞–∂–º–∏ ‚öôÔ∏è API');
  const r=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${S.geminiKey}`,{
    method:'POST',headers:{'Content-Type':'application/json'},
    body:JSON.stringify({contents:[{parts:[{text:prompt}]}],generationConfig:{maxOutputTokens:maxT||280,temperature:temp||0.85}})
  });
  if(!r.ok){const e=await r.text();throw new Error('Gemini '+r.status+': '+e.slice(0,100));}
  const d=await r.json();return d?.candidates?.[0]?.content?.parts?.[0]?.text?.trim()||'';
}
async function thinkAgent(userText){
  const a=ARCH[S.archetype];const x100d=getX100Day();
  const hist=S.history.slice(-4).map(h=>`${h.role==='user'?'–†–æ—Å—Ç–∏—Å–ª–∞–≤':a.name}: ${h.text}`).join('
');
  setThkStep('–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –Ω–∞–º–µ—Ä–µ–Ω–∏–µ...');
  let analysis=null;
  try{
    const raw=await geminiCall(`–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π. –í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û JSON –±–µ–∑ markdown:
{"intent":"–∑–∞–¥–∞—á–∞|—Ä–µ—Ñ–ª–µ–∫—Å–∏—è|–≤–æ–ø—Ä–æ—Å|–∏–Ω—Å–∞–π—Ç|—ç–º–æ—Ü–∏—è|–∫—Ä–∏–ø—Ç–æ|–ø—Ä–æ–µ–∫—Ç","energy":"–≤—ã—Å–æ–∫–∞—è|–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è|–Ω–∏–∑–∫–∞—è","real_need":"–æ–¥–Ω–∞ —Ñ—Ä–∞–∑–∞","project_link":"x100|oasis|godlocal|crypto|–Ω–µ—Ç","action_item":"–∑–∞–¥–∞—á–∞ –∏–ª–∏ null","response_style":"–º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å|–Ω–∞–ø—Ä–∞–≤–∏—Ç—å|–ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å|—Å–æ–∑–¥–∞—Ç—å|–∫—Ä–∞—Ç–∫–æ","key_insight":"–∏–Ω—Å–∞–π—Ç –∏–ª–∏ null"}
–°–æ–æ–±—â–µ–Ω–∏–µ: "${userText}"
X100: ${x100d?'–¥–µ–Ω—å '+x100d+'/100':'–Ω–µ –∑–∞–ø—É—â–µ–Ω'}
–ò—Å—Ç–æ—Ä–∏—è: ${hist||'(–Ω–∞—á–∞–ª–æ)'}`,200,0.1);
    const m=raw.match(/\{[\s\S]*\}/);if(m)analysis=JSON.parse(m[0]);
  }catch(e){}
  setThkStep('–ì–µ–Ω–µ—Ä–∏—Ä—É—é –æ—Ç–≤–µ—Ç '+a.name+'–∞...');
  const ins=analysis?.key_insight?'
–ò–Ω—Å–∞–π—Ç: '+analysis.key_insight:'';
  const nee=analysis?.real_need?'
–†–µ–∞–ª—å–Ω–∞—è –Ω—É–∂–¥–∞: '+analysis.real_need:'';
  const sty=analysis?.response_style?'
–°—Ç–∏–ª—å: '+analysis.response_style:'';
  const reply=await geminiCall(`${a.system}
${CTX}
X100: ${x100d?'–¥–µ–Ω—å '+x100d+'/100':'–Ω–µ –∑–∞–ø—É—â–µ–Ω'}${ins}${nee}${sty}
–ü—Ä–∞–≤–∏–ª–∞: 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è. –ë–µ–∑ "–ö–æ–Ω–µ—á–Ω–æ!", "–û—Ç–ª–∏—á–Ω–æ!". –Ø–∑—ã–∫ –∫–∞–∫ –ø–∏—à–µ—Ç —é–∑–µ—Ä. –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ —Ç–µ–æ—Ä–∏—è.
–ò—Å—Ç–æ—Ä–∏—è: ${hist||'(–Ω–∞—á–∞–ª–æ)'}
–†–æ—Å—Ç–∏—Å–ª–∞–≤: "${userText}"
${a.name}:`,280,0.88);
  return{reply,analysis};
}
function saveTodo(t){
  S.todos.unshift({text:t,done:false,ts:Date.now()});
  if(S.todos.length>20)S.todos=S.todos.slice(0,20);
  localStorage.setItem('todos',JSON.stringify(S.todos));renderMemory();
}
function saveNote(){
  const i=document.getElementById('memory-input');const t=i.value.trim();if(!t)return;
  S.notes.unshift(t);if(S.notes.length>30)S.notes=S.notes.slice(0,30);
  localStorage.setItem('notes',JSON.stringify(S.notes));i.value='';renderMemory();toast('üìù –ó–∞–ø–æ–º–Ω–∏–ª');
}
function toggleTodo(i){S.todos[i].done=!S.todos[i].done;localStorage.setItem('todos',JSON.stringify(S.todos));renderMemory();}
function renderMemory(){
  const te=document.getElementById('todos-list');
  te.innerHTML=S.todos.length?S.todos.slice(0,8).map((t,i)=>`<div class="todo-item ${t.done?'done':''}" onclick="toggleTodo(${i})"><div class="todo-check"></div><span class="todo-text">${t.text}</span></div>`).join(''):'<div class="memory-item">üí≠ –ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç.</div>';
  const ne=document.getElementById('notes-list');
  ne.innerHTML=S.notes.length?S.notes.slice(0,10).map(n=>`<div class="memory-item">üìù ${n}</div>`).join(''):'<div class="memory-item">üìì –ù–∞–ø–∏—à–∏ —á—Ç–æ-—Ç–æ –Ω–∏–∂–µ.</div>';
}
function renderProjects(){
  document.getElementById('projects-list').innerHTML=PROJS.map((p,i)=>`
    <div class="project-card" onclick="quickAskProject(${i})">
      <div class="project-card-header"><div class="project-name">${p.name}</div><div class="project-status status-${p.status}">${p.status==='live'?'‚óè LIVE':'‚öô BUILD'}</div></div>
      <div class="project-desc">${p.desc}</div>
      <div class="project-next">${p.next}</div>
    </div>`).join('');
}
function quickAskProject(i){quickAsk(PROJS[i].q);switchTab('chat');}
function renderSignals(){
  document.getElementById('signals-list').innerHTML=SIGS.map(s=>`
    <div class="signal-card">
      <div class="signal-top"><div class="signal-token">${s.token}</div><div class="signal-gain ${s.gain.startsWith('-')?'neg':''}">${s.gain}</div></div>
      <div class="signal-row"><span>MC: ${s.mc}</span><span>${s.time}</span></div>
      <span class="signal-pattern">${s.pattern}</span>
    </div>`).join('');
  document.getElementById('patterns-list').innerHTML=PATS.map(p=>`<div class="pattern-item">‚Ä¢ ${p}</div>`).join('');
}
function runSignalScan(){toast('‚ö° –ó–∞–ø—É—Å–∫–∞—é...');switchTab('chat');quickAsk('–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π Solana —Å–∏–≥–Ω–∞–ª—ã ‚Äî –Ω–∞ —á—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å —Å–µ–π—á–∞—Å?');}
async function toggleVoice(){
  if(S.recording){S.mediaRec?.stop();S.recording=false;document.getElementById('voice-btn').classList.remove('recording');return;}
  try{
    const stream=await navigator.mediaDevices.getUserMedia({audio:true});
    const rec=new MediaRecorder(stream);const chunks=[];
    rec.ondataavailable=e=>chunks.push(e.data);
    rec.onstop=async()=>{
      stream.getTracks().forEach(t=>t.stop());toast('üé§ –†–∞—Å–ø–æ–∑–Ω–∞—é...');
      const blob=new Blob(chunks,{type:'audio/webm'});
      try{
        const key=S.geminiKey;if(!key)throw new Error('no key');
        const fd=new FormData();fd.append('file',blob,'audio.webm');
        const ur=await fetch(`https://generativelanguage.googleapis.com/upload/v1beta/files?key=${key}`,{method:'POST',headers:{'X-Goog-Upload-Protocol':'multipart'},body:fd});
        const ud=await ur.json();const uri=ud?.file?.uri;if(!uri)throw new Error('upload failed');
        const tr=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${key}`,{
          method:'POST',headers:{'Content-Type':'application/json'},
          body:JSON.stringify({contents:[{parts:[{fileData:{mimeType:'audio/webm',fileUri:uri}},{text:'Transcribe. Output ONLY transcription.'}]}]})
        });
        const td=await tr.json();const txt=td?.candidates?.[0]?.content?.parts?.[0]?.text?.trim();
        if(txt){document.getElementById('input-box').value=txt;autoResize(document.getElementById('input-box'));}
      }catch(e){toast('‚ö†Ô∏è –û—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è');}
    };
    rec.start();S.mediaRec=rec;S.recording=true;document.getElementById('voice-btn').classList.add('recording');
  }catch(e){toast('‚ö†Ô∏è –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É');}
}
function openConfig(){
  document.getElementById('cfg-gemini').value=S.geminiKey||'';
  document.getElementById('cfg-backend').value=S.backendUrl||'';
  document.getElementById('config-overlay').classList.add('open');
}
function closeConfig(){document.getElementById('config-overlay').classList.remove('open');}
function closeConfigIfOutside(e){if(e.target===document.getElementById('config-overlay'))closeConfig();}
function saveConfig(){
  S.geminiKey=document.getElementById('cfg-gemini').value.trim();
  S.backendUrl=document.getElementById('cfg-backend').value.trim();
  localStorage.setItem('gemini',S.geminiKey);localStorage.setItem('backend',S.backendUrl);
  closeConfig();toast('‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ');
}
let toastT;
function toast(m){const e=document.getElementById('toast');e.textContent=m;e.classList.add('show');clearTimeout(toastT);toastT=setTimeout(()=>e.classList.remove('show'),2500);}
document.addEventListener('click',e=>{
  const p=document.getElementById('arch-panel');const b=document.getElementById('archetype-badge');
  if(!p.contains(e.target)&&e.target!==b&&!b.contains(e.target))p.classList.remove('open');
});
</script>
</body>
</html>